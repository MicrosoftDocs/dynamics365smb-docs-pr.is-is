---
title: Hönnunarupplýsingar - bókunarstrúktúr vörurakningar | Microsoft Docs
description: Lærðu hvernig nota skal birgðabókarfærslur sem aðalflutningsaðili vörurakningarnúmera.
author: SorenGP
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, item tracking, posting, inventory
ms.date: 10/01/2019
ms.author: sgroespe
ms.openlocfilehash: a016863dc7dd5667074060a21e352ce4a56444cd
ms.sourcegitcommit: cfc92eefa8b06fb426482f54e393f0e6e222f712
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 12/03/2019
ms.locfileid: "2880161"
---
# <a name="design-details-item-tracking-posting-structure"></a><span data-ttu-id="db211-103">Hönnunarupplýsingar: bókunarstrúktúr vörurakningar</span><span class="sxs-lookup"><span data-stu-id="db211-103">Design Details: Item Tracking Posting Structure</span></span>
<span data-ttu-id="db211-104">Til að jafna með birgðakostnaðarvirkni og til að fá einfaldari og öflugri lausn, erubirgðabókarfærslur notaðar sem aðalflutningsaðili vörurakningarnúmera.</span><span class="sxs-lookup"><span data-stu-id="db211-104">To align with inventory costing functionality and to obtain a simpler and more robust solution, item ledger entries are used as the primary carrier of item tracking numbers.</span></span>  
  
<span data-ttu-id="db211-105">Vörurakningarnúmer í rekstrareiningum innan og utan pöntunarnets eru tilgreind í töflunni **Frátekningarfærsla** (T337).</span><span class="sxs-lookup"><span data-stu-id="db211-105">Item tracking numbers on order network entities and non-order network entities are specified in the **Reservation Entry** table (T337).</span></span> <span data-ttu-id="db211-106">Vörurakningarnúmer sem tengjast sögulegum upplýsingum eru sótt beint úr birgðahöfuðbókarfærslum sem tengjast viðkomandi færslu.</span><span class="sxs-lookup"><span data-stu-id="db211-106">Item tracking numbers that are related to historical information are retrieved directly from the item ledger entries that are related to the transaction in question.</span></span> <span data-ttu-id="db211-107">Þetta þýðir að birgðahöfuðbókarfærslur endurspegla vörurakningarforskrift á bókaðri pöntunarlínu.</span><span class="sxs-lookup"><span data-stu-id="db211-107">This means that item ledger entries reflect the item tracking specification of the posted order line.</span></span>  
  
<span data-ttu-id="db211-108">Síðan fyrir **vörurakningarlínur** endurheimtir upplýsingar úr T337 og úr birgðafærslum og sýnir þær í bráðabirgðatöflunni **Rakningarlýsing** (T336).</span><span class="sxs-lookup"><span data-stu-id="db211-108">The **Item Tracking Lines** page retrieves the information from T337 and the item ledger entries and shows it through the temporary table, **Tracking Specification** (T336).</span></span> <span data-ttu-id="db211-109">T336 heldur einnig tímabundnum gögnum á **Síðu vörurakningarlína** fyrir vörurakningarmagn sem á eftir að reikningsfæra.</span><span class="sxs-lookup"><span data-stu-id="db211-109">T336 also hold the temporary data in the **Item Tracking Lines page** for item tracking quantities that remain to be invoiced.</span></span>  
  
## <a name="one-to-many-relation"></a><span data-ttu-id="db211-110">Tengsl eins í marga</span><span class="sxs-lookup"><span data-stu-id="db211-110">One-to-Many Relation</span></span>  
<span data-ttu-id="db211-111">Taflan **Birgðafærslutengsl**, sem skal nota til að tengja bókaða fylgiskjalslínu við tengdar birgðafærslur, samanstendur af tveimur meginhlutum:</span><span class="sxs-lookup"><span data-stu-id="db211-111">The **Item Entry Relation** table, which is used to link a posted document line with its related item ledger entries, consists of two main parts:</span></span>  
  
* <span data-ttu-id="db211-112">Bendill á bókuðu skjalalínuna, reiturinn **Pöntunarlínunr.**</span><span class="sxs-lookup"><span data-stu-id="db211-112">A pointer to the posted document line, the **Order Line No.**</span></span> <span data-ttu-id="db211-113">.</span><span class="sxs-lookup"><span data-stu-id="db211-113">field.</span></span>  
* <span data-ttu-id="db211-114">Færslunúmer bendir til birgðahöfuðbókarfærslu, reitsins **Birgðafærslunr.**.</span><span class="sxs-lookup"><span data-stu-id="db211-114">An entry number pointing to an item ledger entry, the **Item Entry No.** field.</span></span>  
  
<span data-ttu-id="db211-115">Virkni núverandi **Færslunr.** reitar, sem tengir birgðafærslu við bókaða skjalalínu, meðhöndlar dæmigerð tengsl tveggja eininga þegar engin vörurakningarnúmer eru til staðar á bókuðu skjalalínunni.</span><span class="sxs-lookup"><span data-stu-id="db211-115">The functionality of the existing **Entry No.** field, which relates an item ledger entry to a posted document line, handles the typical one-to-one relation when no item tracking numbers exist on the posted document line.</span></span> <span data-ttu-id="db211-116">Ef vörurakningarnúmer eru til er reiturinn **Færslunr.** skilinn eftir auður, og tengslin einn-á-móti-mörgum eru meðhöndluð af töflunni **Tengsl birgðafærslu**.</span><span class="sxs-lookup"><span data-stu-id="db211-116">If item tracking numbers exist, then the **Entry No.** field is left blank, and the one-to-many relation is handled by the **Item Entry Relation** table.</span></span> <span data-ttu-id="db211-117">Ef bókaða skjalalínan er með vörurakningarnúmer en tengist aðeins einni birgðafærslu sér reiturinn **Færslunr.** um tengslin og engin færsla er skráð í töflunni **Tengsl birgðafærslu**.</span><span class="sxs-lookup"><span data-stu-id="db211-117">If the posted document line carries item tracking numbers but only relates to a single item ledger entry, then the **Entry No.** field handles the relation, and the no record is created in the **Item Entry Relation** table.</span></span>  
  
## <a name="codeunits-80-and-90"></a><span data-ttu-id="db211-118">Kóðaeiningar 80 og 90</span><span class="sxs-lookup"><span data-stu-id="db211-118">Codeunits 80 and 90</span></span>  
<span data-ttu-id="db211-119">Til að skipta birgðahöfuðbókarfærslum við bókun, er kóðinn í kóðaeiningu 80 og kóðaeiningu 90, er með lykkjum sem keyra í gegnum altæka tímabundnar færslubreytur.</span><span class="sxs-lookup"><span data-stu-id="db211-119">To split the item ledger entries during posting, the code in codeunit 80 and codeunit 90, is encircled by loops that run through global temporary record variables.</span></span> <span data-ttu-id="db211-120">Þessi kóði kallar á kóðaeiningu 22 með birgðarbókarlínu.</span><span class="sxs-lookup"><span data-stu-id="db211-120">This code calls codeunit 22 with an item journal line.</span></span> <span data-ttu-id="db211-121">Þessar breytur eru frumstilltar þegar vörurakningarnúmer eru til fyrir skjalalínuna.</span><span class="sxs-lookup"><span data-stu-id="db211-121">These variables are initialized when item tracking numbers exist for the document line.</span></span> <span data-ttu-id="db211-122">Til að halda kóðann einfalt, þessi lykkjuuppbyggingu er alltaf notuð.</span><span class="sxs-lookup"><span data-stu-id="db211-122">To keep the code simple, this looping structure is always used.</span></span> <span data-ttu-id="db211-123">Ef engin vörurakningarnúmer eru til staðar fyrir skjalalínuna er ein færsla sett inn og lykkjan er einungis unnin einu sinni.</span><span class="sxs-lookup"><span data-stu-id="db211-123">If no item tracking numbers exist for the document line, then a single record is inserted, and the loop runs only once.</span></span>  
  
## <a name="posting-the-item-journal"></a><span data-ttu-id="db211-124">Birgðabókin bókuð</span><span class="sxs-lookup"><span data-stu-id="db211-124">Posting the Item Journal</span></span>  
<span data-ttu-id="db211-125">Vörurakningarnúmer eru flutt fyrir milligöngu frátekningarfærslna sem tengjast birgðafærslunni og lykkjumyndum gegnum vörurakningarnúmer á sér stað í kóðaeiningu 22.</span><span class="sxs-lookup"><span data-stu-id="db211-125">Item tracking numbers are transferred via the reservation entries that relate to the item ledger entry, and the looping through item tracking numbers occurs in codeunit 22.</span></span> <span data-ttu-id="db211-126">Þessi hugmynd virkar á sama hátt þegar birgðafærslulína er notuð óbeint til að bóka sölu eða innkaupapöntun og þegar birgðafærslulína er notuð beint.</span><span class="sxs-lookup"><span data-stu-id="db211-126">This concept works in the same way when an item journal line is used indirectly to post a sale or purchase order as when an item journal line is used directly.</span></span> <span data-ttu-id="db211-127">Þegar birgðabók er notuð beint er vísar reiturinn **uuppsprettulínuauðkenni** beint á sjálfa birgðabókarlínuna.</span><span class="sxs-lookup"><span data-stu-id="db211-127">When the item journal is used directly, the **Source Row ID** field points to the item journal line itself.</span></span>  
  
## <a name="code-unit-22"></a><span data-ttu-id="db211-128">Kóðaeining 22</span><span class="sxs-lookup"><span data-stu-id="db211-128">Code Unit 22</span></span>  
<span data-ttu-id="db211-129">Kóðaeiningar 80 og 90 lykkja hringingu frá kóðaeiningu 22 við bókun reiknings fyrir vörurakningarnúmer og við reikningsfræslu á fyrirliggjandi sendingum eða móttökum.</span><span class="sxs-lookup"><span data-stu-id="db211-129">Codeunits 80 and 90 loop the call of codeunit 22 during the invoice posting of item tracking numbers and during the invoicing of existing shipments or receipts.</span></span>  
  
<span data-ttu-id="db211-130">Við magnbókun vörurakningarnúmera, sækir kóðaeining 22 vörurakningarnúmer úr færslum í T337 sem tengjast bókuninni.</span><span class="sxs-lookup"><span data-stu-id="db211-130">During quantity posting of item tracking numbers, codeunit 22 retrieves item tracking numbers from the entries in T337 that relate to the posting.</span></span> <span data-ttu-id="db211-131">Þessar færslur eru settar beint á birgðabókarlínuna.</span><span class="sxs-lookup"><span data-stu-id="db211-131">These entries are placed directly on the item journal line.</span></span>  
  
<span data-ttu-id="db211-132">Kóðaeining 22 lykkjast gegnum vörurakningarnúmer og skiptir bókuninni í þær birgðabókarfærslur sem bera þau vörurakningarnúmer.</span><span class="sxs-lookup"><span data-stu-id="db211-132">Codeunit 22 loops through the item tracking numbers and splits the posting into the respective item ledger entries that carry the item tracking numbers.</span></span> <span data-ttu-id="db211-133">Upplýsingar um hvaða birgðabókarfærslur eru búnar til er skilað til T337 með tímabundna T336 skrá, sem kennt er við ferli í kóðaeiningu 22.</span><span class="sxs-lookup"><span data-stu-id="db211-133">Information about which item ledger entries are created is returned to T337 by using a temporary T336 record, which is called by a procedure in codeunit 22.</span></span> <span data-ttu-id="db211-134">Þessi aðferð er kölluð fram þegar kóðaeining 22 hefur lokið þess að keyra vegna á þeim tímapunkti kóðaeining 22 hluturinn inniheldur upplýsingar.</span><span class="sxs-lookup"><span data-stu-id="db211-134">This procedure is triggered when codeunit 22 has finished its run because at that point, the codeunit 22 object contains the information.</span></span> <span data-ttu-id="db211-135">Þegar tímabundinT336 færsla er endurheimt, stofna kóðaeiningar 80 og 90 færslur í töflunni **Birgðafærslutengsl** til að tengja stofnuðu birðgabókarfærslurnar við stofnuðu sendingarlínuna eða inngreiðslulínuna.</span><span class="sxs-lookup"><span data-stu-id="db211-135">When the temporary T336 record is retrieved, codeunits 80 and 90 create records in the **Item Entry Relation** table to link the created item ledger entries to the created shipment or receipt line.</span></span> <span data-ttu-id="db211-136">Kóðaeiningar 80 eða 90 umbreyta síðan tímabundum skrám T336 í raunfærslur T336 sem eru tengdar við línu sem um ræðir.</span><span class="sxs-lookup"><span data-stu-id="db211-136">Codeunits 80 or codeunit 90 then converts the temporary T336 records to real T336 records that are related to the line in question.</span></span> <span data-ttu-id="db211-137">Hins vegar eiga þessi viðskipti sér aðeins stað aðeins ef bókuðu skjalalínunni er ekki eytt, vegna þess að hún er aðeins bókuð að hluta til.</span><span class="sxs-lookup"><span data-stu-id="db211-137">However, this conversion occurs only if the posted document line is not deleted, because it is only partially posted.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="db211-138">Sjá einnig</span><span class="sxs-lookup"><span data-stu-id="db211-138">See Also</span></span>  
<span data-ttu-id="db211-139">[Hönnunarupplýsingar: vörurakning](design-details-item-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="db211-139">[Design Details: Item Tracking](design-details-item-tracking.md) </span></span>  
[<span data-ttu-id="db211-140">Hönnunarupplýsingarn: vörurakning hönnun</span><span class="sxs-lookup"><span data-stu-id="db211-140">Design Details: Item Tracking Design</span></span>](design-details-item-tracking-design.md)