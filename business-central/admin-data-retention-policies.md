---
title: Hreinsa gögn með varðveislureglum | Microsoft Docs
description: Hægt er að tilgreina hversu oft á að eyða tilteknum gerðum af gögnum.
author: bholtorf
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: delete, data, retention, policy, policies
ms.date: 10/01/2020
ms.author: bholtorf
ms.openlocfilehash: 279a76751b6652221d83ee453cc171bf357c0328
ms.sourcegitcommit: ddbb5cede750df1baba4b3eab8fbed6744b5b9d6
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 10/01/2020
ms.locfileid: "3927677"
---
# <a name="define-retention-policies"></a><span data-ttu-id="1c911-103">Skilgreina varðveislureglur</span><span class="sxs-lookup"><span data-stu-id="1c911-103">Define Retention Policies</span></span>
<span data-ttu-id="1c911-104">Stjórnendur geta skilgreint varðveislureglur til að tilgreina hversu oft þeir vilja að [!INCLUDE[prodshort](includes/prodshort.md)] eyði úreltum gögnum í töflum sem innihalda kladdafærslur og safnvistaðar færslur.</span><span class="sxs-lookup"><span data-stu-id="1c911-104">Administrators can define retention policies to specify how frequently they want [!INCLUDE[prodshort](includes/prodshort.md)] to delete outdated data in tables that contain log entries and archived records.</span></span> <span data-ttu-id="1c911-105">Til dæmis getur hreinsun á kladdafærslum gert auðveldara um vik að vinna með gögnin sem eiga við.</span><span class="sxs-lookup"><span data-stu-id="1c911-105">For example, cleaning up log entries can make it easier to work with the data that's actually relevant.</span></span> <span data-ttu-id="1c911-106">Reglur geta innihaldið öll gögn í töflunum sem eru komin fram yfir lokadagsetninguna eða hægt er að bæta við síuskilyrðum sem innihalda aðeins tiltekin útrunnin gögn í reglunni.</span><span class="sxs-lookup"><span data-stu-id="1c911-106">Policies can include all data in the tables that is past the expiration date, or you can add filter criteria that will include only certain expired data in the policy.</span></span> 

## <a name="required-setups-and-permissions"></a><span data-ttu-id="1c911-107">Áskildar uppsetningar og heimildir</span><span class="sxs-lookup"><span data-stu-id="1c911-107">Required Setups and Permissions</span></span>
<span data-ttu-id="1c911-108">Áður en hægt er að búa til varðveislureglur þarf að setja upp eftirfarandi.</span><span class="sxs-lookup"><span data-stu-id="1c911-108">Before you can create retention policies, you must set up the following.</span></span>

|<span data-ttu-id="1c911-109">Uppsetning</span><span class="sxs-lookup"><span data-stu-id="1c911-109">Setup</span></span>  |<span data-ttu-id="1c911-110">Description</span><span class="sxs-lookup"><span data-stu-id="1c911-110">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="1c911-111">**Leyfðar töflur**</span><span class="sxs-lookup"><span data-stu-id="1c911-111">**Allowed Tables**</span></span>     |<span data-ttu-id="1c911-112">Við bjóðum upp á lista yfir töflur sem hafa má með í varðveislureglum.</span><span class="sxs-lookup"><span data-stu-id="1c911-112">We provide a list of the tables that can be included in retention policies.</span></span> <span data-ttu-id="1c911-113">Hins vegar, ef ætlunin er að bæta töflum úr viðbót við varðveislureglu þarf þróunaraðili að bæta töflum notanda við listann.</span><span class="sxs-lookup"><span data-stu-id="1c911-113">However, if you want to add tables from an extension to a retention policy a developer must add their tables to the list.</span></span> <span data-ttu-id="1c911-114">Frekari upplýsingar er að finna í [Viðbótin höfð með í varðveislureglu](admin-data-retention-policies.md#including-your-extension-in-a-retention-policy-requires-help-from-a-developer).</span><span class="sxs-lookup"><span data-stu-id="1c911-114">For more information, see [Including Your Extension in a Retention Policy](admin-data-retention-policies.md#including-your-extension-in-a-retention-policy-requires-help-from-a-developer).</span></span>          |
|<span data-ttu-id="1c911-115">**Varðveislutímar**</span><span class="sxs-lookup"><span data-stu-id="1c911-115">**Retention Periods**</span></span>     |<span data-ttu-id="1c911-116">Tilgreina tímabil sem á að halda gögnum í töflunum í reglu.</span><span class="sxs-lookup"><span data-stu-id="1c911-116">Specify periods of time for which to keep data in the tables in a policy.</span></span> <span data-ttu-id="1c911-117">Tímabilin ákveða hversu oft gögnum verður eytt.</span><span class="sxs-lookup"><span data-stu-id="1c911-117">The periods determine how often data will be deleted.</span></span>         |

<span data-ttu-id="1c911-118">Þar að auki þarf að vera með heimildir yfirnotanda eða heimildasamstæðu fyrir uppsetningu varðveislureglu.</span><span class="sxs-lookup"><span data-stu-id="1c911-118">Additionally, you must have the SUPER user permissions or the Retention Policy Setup permission set.</span></span> <span data-ttu-id="1c911-119">Notendur sem fá heimildasamstæðuna fyrir uppsetningu varðveislureglu geta skilgreint varðveislureglur fyrir töflur, jafnvel þótt þeir hafi ekki heimildir til að lesa og eyða heimildum fyrir þessar töflur.</span><span class="sxs-lookup"><span data-stu-id="1c911-119">Users who are granted the Retention Policy Setup permission set can define retention policies for tables, even if they do not have Read and Delete permissions for those tables.</span></span> <span data-ttu-id="1c911-120">Verkraðarfærslan verður að vera keyrð sem notandi með heimildir til að lesa og eyða gögnunum.</span><span class="sxs-lookup"><span data-stu-id="1c911-120">The job queue entry must run as a user with permissions to read and delete the data.</span></span> <span data-ttu-id="1c911-121">Ráðlagt er að veita ekki heimildasamstæðu fyrir uppsetningu varðveislureglu til notenda sem ættu ekki að fá leyfi til að eyða gögnum.</span><span class="sxs-lookup"><span data-stu-id="1c911-121">We recommend that you do not grant the Retention Policy Setup permission set to users who should not be allowed to delete data.</span></span>

> [!NOTE]
> <span data-ttu-id="1c911-122">Ef verið er að nota [!INCLUDE[prodshort](includes/prodshort.md)] á staðnum og ætlunin er að prófa varðveislureglur í Cronus-sýnigagnagrunninum, eru nokkrir hlutir sem þarf að gera.</span><span class="sxs-lookup"><span data-stu-id="1c911-122">If you are using [!INCLUDE[prodshort](includes/prodshort.md)] on-premises, and you want to try out retention policies in the the Cronus demonstration database, there are a few things you need to do.</span></span> <span data-ttu-id="1c911-123">Sýnifyrirtækið inniheldur ekki töflur sem hægt er að nota með varðveislureglum og því þarf að bæta þeim við.</span><span class="sxs-lookup"><span data-stu-id="1c911-123">The demonstration company does not contain tables that you can use with retention policies, so you need to add them.</span></span> <span data-ttu-id="1c911-124">Til að gera það skal stofna nýtt, autt fyrirtæki í sýnigagnagrunninum.</span><span class="sxs-lookup"><span data-stu-id="1c911-124">To do that, create a new, blank company in the demonstration database.</span></span> <span data-ttu-id="1c911-125">Í nýja fyrirtækinu skal flytja inn grunnstillingapakkann RapidStart fyrir landið þitt sem samræmist staðlaða pakkanum NAV17.0.W1.ENU.STANDARD.rapidstart.</span><span class="sxs-lookup"><span data-stu-id="1c911-125">In the new company, import the RapidStart configuration package for your country that corresponds to the standard NAV17.0.W1.ENU.STANDARD.rapidstart package.</span></span> <span data-ttu-id="1c911-126">Uppsetningargögnin fyrir varðveislureglur verða tiltækar í nýja fyrirtækinu.</span><span class="sxs-lookup"><span data-stu-id="1c911-126">The setup data for retention policies will be available in the new company.</span></span>

### <a name="to-create-retention-periods"></a><span data-ttu-id="1c911-127">Varðveislutímar búnir til</span><span class="sxs-lookup"><span data-stu-id="1c911-127">To create retention periods</span></span>
<span data-ttu-id="1c911-128">Varðveislutímar geta verið eins langir eða stuttir og þú vilt.</span><span class="sxs-lookup"><span data-stu-id="1c911-128">Retention periods can be as long or as short as you want.</span></span> <span data-ttu-id="1c911-129">Til að búa til varðveislutíma skal á síðunni **Varðveislureglur** nota aðgerðina **Varðveislutími** .</span><span class="sxs-lookup"><span data-stu-id="1c911-129">To create retention periods, on the **Retention Policies** page, use the **Retention Period** action.</span></span> <span data-ttu-id="1c911-130">Tímabilin sem eru skilgreind verða tiltæk fyrir allar reglur.</span><span class="sxs-lookup"><span data-stu-id="1c911-130">The periods you define will be available for all policies.</span></span>

> [!NOTE]
> <span data-ttu-id="1c911-131">Af samræmisástæðum höfum við skilgreint lágmarks varðveislutíma fyrir sumar töflur.</span><span class="sxs-lookup"><span data-stu-id="1c911-131">For compliance reasons, we have defined a minimum retention period for some tables.</span></span> <span data-ttu-id="1c911-132">Ef varðveislutími er stilltur sem er styttri en lágmark sem krafist er, birtast skilaboð um áskilda tímabilið.</span><span class="sxs-lookup"><span data-stu-id="1c911-132">If you set a retention period that is shorter than minimum required, a message will display the mandatory period.</span></span>

### <a name="set-up-a-retention-policy"></a><span data-ttu-id="1c911-133">Setja upp varðveislureglu</span><span class="sxs-lookup"><span data-stu-id="1c911-133">Set up a retention policy</span></span>
1. <span data-ttu-id="1c911-134">Veldu ![Ljósaperuna sem opnar eiginleika Viðmótsleitar](media/ui-search/search_small.png "Segðu mér hvað þú vilt gera") táknið, sláðu inn **Varðveislureglur** og veldu síðan tengda tengilinn.</span><span class="sxs-lookup"><span data-stu-id="1c911-134">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Retention Policies** , and choose the related link.</span></span>
2. <span data-ttu-id="1c911-135">Í reitnum **Kenni töflu** skal velja töflu sem á að taka með í regluna.</span><span class="sxs-lookup"><span data-stu-id="1c911-135">In the **Table ID** field, choose the table that you want to include in the policy.</span></span>
3. <span data-ttu-id="1c911-136">Í reitnum **Varðveislutími** skal tilgreina tímalengdina sem geyma á gögnin í töflunni.</span><span class="sxs-lookup"><span data-stu-id="1c911-136">In the **Retention Period** field, specify the length of time for which to keep the data in the table.</span></span>
4. <span data-ttu-id="1c911-137">Valfrjálst: Til að nota regluna fyrir tiltekin gögn í töflu skal slökkva á Nota fyrir allar færslur.</span><span class="sxs-lookup"><span data-stu-id="1c911-137">Optional: To apply the policy to specific data in a table, turn off the Apply to all records toggle.</span></span> <span data-ttu-id="1c911-138">Flýtiflipinn Skrá varðveislureglu birtist þar sem hægt er að stilla síur til að búa til undirsafn af gögnum fyrir hverja línu.</span><span class="sxs-lookup"><span data-stu-id="1c911-138">The Record Retention Policy FastTab will display, where you can set filters to create subsets of data for each line.</span></span> <span data-ttu-id="1c911-139">Frekari upplýsingar er að finna í [Síun](ui-enter-criteria-filters.md#filtering).</span><span class="sxs-lookup"><span data-stu-id="1c911-139">For more information, see [Filtering](ui-enter-criteria-filters.md#filtering).</span></span>

   > [!NOTE]
   > <span data-ttu-id="1c911-140">Hver lína er með sinn eigin varðveislutíma.</span><span class="sxs-lookup"><span data-stu-id="1c911-140">Each line has its own retention period.</span></span> <span data-ttu-id="1c911-141">Ef annar varðveislutími er tilgreindur fyrir sömu gögnin, verður lengsti tíminn notaður.</span><span class="sxs-lookup"><span data-stu-id="1c911-141">If you specify different retention periods for the same data, the longest period will be used.</span></span> <span data-ttu-id="1c911-142">Sumar töflur innihalda líka síur sem ekki er hægt að breyta eða fjarlægja.</span><span class="sxs-lookup"><span data-stu-id="1c911-142">Also, some tables contain filters that you cannot change or remove.</span></span> <span data-ttu-id="1c911-143">Til að hjálpa til við að auðkenna þessar síur birtast þær í ljósari lit.</span><span class="sxs-lookup"><span data-stu-id="1c911-143">To help you identify these filters, they appear in a lighter color font.</span></span>

## <a name="applying-retention-policies"></a><span data-ttu-id="1c911-144">Varðveislureglur settar á</span><span class="sxs-lookup"><span data-stu-id="1c911-144">Applying Retention Policies</span></span>
<span data-ttu-id="1c911-145">Hægt er að nota verkraðarfærslu til að setja á varðveislureglur til að eyða gögnum sjálfkrafa eða setja reglur á handvirkt.</span><span class="sxs-lookup"><span data-stu-id="1c911-145">You can use a job queue entry to apply retention policies to delete data automatically, or you can manually apply policies.</span></span>

<span data-ttu-id="1c911-146">Til að nota varðveislureglu sjálfkrafa skal bara stofna og virkja reglu.</span><span class="sxs-lookup"><span data-stu-id="1c911-146">To apply a retention policy automatically, just create and enable a policy.</span></span> <span data-ttu-id="1c911-147">Þegar regla er gerð virk búum við til verkraðarfærslu sem setur á varðveislureglur samkvæmt varðveislutímanum sem er tilgreindur.</span><span class="sxs-lookup"><span data-stu-id="1c911-147">When you enable a policy we create a job queue entry that will apply retention policies according to the retention period you specify.</span></span> <span data-ttu-id="1c911-148">Allar varðveislureglur munu nota sömu verkraðarfærsluna.</span><span class="sxs-lookup"><span data-stu-id="1c911-148">All retention policies will use the same job queue entry.</span></span> <span data-ttu-id="1c911-149">Sjálfgefið er að verkraðarfærslan beiti reglunni á hverjum degi kl. 02:00.</span><span class="sxs-lookup"><span data-stu-id="1c911-149">By default, the job queue entry applies the policy every day at 0200.</span></span> <span data-ttu-id="1c911-150">Hægt er að breyta sjálfgildinu en ef það er gert mælum við með því að það keyri utan vinnutíma.</span><span class="sxs-lookup"><span data-stu-id="1c911-150">You can change the default, but if you do we recommend that it runs outside business hours.</span></span> <span data-ttu-id="1c911-151">Frekari upplýsingar, sjá [Nota verkraðir til að tímaraða verkhlutum](admin-job-queues-schedule-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="1c911-151">For more information, see [Use Job Queues to Schedule Tasks](admin-job-queues-schedule-tasks.md).</span></span> 

<span data-ttu-id="1c911-152">Hægt er að setj á reglu handvirkt með því að nota aðgerðina **Nota handvirkt** á síðunni **Varðveislureglur** .</span><span class="sxs-lookup"><span data-stu-id="1c911-152">You can manually apply a policy by using the **Apply Manually** action on the **Retention Policies** page.</span></span> <span data-ttu-id="1c911-153">Ef ætlunin er að nota alltaf reglu handvirkt skal kveikja á **Handvirkt** .</span><span class="sxs-lookup"><span data-stu-id="1c911-153">If you want to always apply a policy manually, turn on the **Manual** toggle.</span></span> <span data-ttu-id="1c911-154">Verkraðarfærslan hunsar þá regluna þegar hún er keyrð.</span><span class="sxs-lookup"><span data-stu-id="1c911-154">The job queue entry will disregard the policy when it runs.</span></span>

## <a name="viewing-retention-policy-log-entries"></a><span data-ttu-id="1c911-155">Kladdafærslur varðveislureglu skoðaðar</span><span class="sxs-lookup"><span data-stu-id="1c911-155">Viewing Retention Policy Log Entries</span></span>
<span data-ttu-id="1c911-156">Hægt er að skoða verkþætti sem tengjast varðveislureglum á síðunni **Varðveislureglukladdi** .</span><span class="sxs-lookup"><span data-stu-id="1c911-156">You can view activity related to retention policies in the **Retention Policy Log** page.</span></span> <span data-ttu-id="1c911-157">Til dæmis eru færslur búnar til þegar regla er notuð, eða ef villur komu upp þegar það var gert.</span><span class="sxs-lookup"><span data-stu-id="1c911-157">For example, entries are created when when a policy is applied, or if errors occurred when that happened.</span></span> 

## <a name="including-your-extension-in-a-retention-policy-requires-help-from-a-developer"></a><span data-ttu-id="1c911-158">Hafa með viðbótina í varðveislureglu (krefst aðstoðar frá þróunaraðila)</span><span class="sxs-lookup"><span data-stu-id="1c911-158">Including Your Extension in a Retention Policy (Requires Help from a Developer)</span></span>
<span data-ttu-id="1c911-159">Að sjálfgefnu ná varðveislureglur aðeins yfir töflur sem eru teknar með í listanum yfir [!INCLUDE[prodshort](includes/prodshort.md)]-töflur sem við bjóðum upp á.</span><span class="sxs-lookup"><span data-stu-id="1c911-159">By default, retention policies cover only tables that are included in the list of [!INCLUDE[prodshort](includes/prodshort.md)] tables that we provide.</span></span> <span data-ttu-id="1c911-160">Hægt er að fjarlægja sjálfgefnar töflur úr listanum og hægt er að bæta við eigin töflum.</span><span class="sxs-lookup"><span data-stu-id="1c911-160">You can remove default tables from the list, and you can add tables that you own.</span></span> <span data-ttu-id="1c911-161">Það er sem sagt ekki hægt að bæta við töflu sem þú bjóst ekki til.</span><span class="sxs-lookup"><span data-stu-id="1c911-161">That is, you cannot add a table that you did not create yourself.</span></span> <span data-ttu-id="1c911-162">Til dæmis er ekki hægt að bæta við öðrum töflum úr [!INCLUDE[prodshort](includes/prodshort.md)] eða úr viðbót sem hefur verið keypt.</span><span class="sxs-lookup"><span data-stu-id="1c911-162">For example, you cannot add other tables from [!INCLUDE[prodshort](includes/prodshort.md)] or from an extension that you have purchased.</span></span>

<span data-ttu-id="1c911-163">Til að bæta töflum við listann yfir leyfðar töflur þarf þróunaraðili að bæta við kóða, til dæmis til að codeunit-uppsetningarforritið fyrir viðbótina (kóðaeining með undirgerðina *uppsetning* ).</span><span class="sxs-lookup"><span data-stu-id="1c911-163">To add your tables to the list of allowed tables, a developer must add some code, for example to the installer codeunit for the extension (a codeunit with the *install* subtype).</span></span> 

<span data-ttu-id="1c911-164">Þegar þróunaraðili bætir við töflu getur hann tilgreint áskildar og sjálfgefnar síur.</span><span class="sxs-lookup"><span data-stu-id="1c911-164">When a developer adds a table, they can specify mandatory and default filters.</span></span> <span data-ttu-id="1c911-165">Ekki er hægt að fjarlægja áskildar síur eða breyta þeim síðar þegar töflum er bætt við til að skilgreina varðveislureglu.</span><span class="sxs-lookup"><span data-stu-id="1c911-165">Mandatory filters cannot be removed or modified later when you add tables to define a retention policy.</span></span> <span data-ttu-id="1c911-166">Sjálfgefnar síur eru bara vinalegar tillögur.</span><span class="sxs-lookup"><span data-stu-id="1c911-166">Default filters are just friendly suggestions.</span></span>

<span data-ttu-id="1c911-167">Eftirfarandi eru dæmi um hvernig á að bæta töflu við lista yfir leyfðar töflur með og án áskildra og sjálfgefinna sía.</span><span class="sxs-lookup"><span data-stu-id="1c911-167">The following are examples of how to add a table to the list of allowed tables with, and without, mandatory or default filters.</span></span> <span data-ttu-id="1c911-168">Fyrir flóknara dæmi skal skoða codeunit 3999 „Reten.</span><span class="sxs-lookup"><span data-stu-id="1c911-168">For a more complex example, see codeunit 3999 "Reten.</span></span> <span data-ttu-id="1c911-169">Pol.</span><span class="sxs-lookup"><span data-stu-id="1c911-169">Pol.</span></span> <span data-ttu-id="1c911-170">Setja upp - BaseApp“.</span><span class="sxs-lookup"><span data-stu-id="1c911-170">Install - BaseApp".</span></span> 

```
 trigger OnInstallAppPerCompany()
    var
        RetenPolAllowedTables: Codeunit "Reten. Pol. Allowed Tables";
    begin
        RetenPolAllowedTables.AddAllowedTable(Database::"Retention Policy Log Entry");
    end;
```

<span data-ttu-id="1c911-171">Eftirfarandi dæmi inniheldur áskilda síu.</span><span class="sxs-lookup"><span data-stu-id="1c911-171">The following example includes a mandatory filter.</span></span>

```
 trigger OnInstallAppPerCompany()
    var
        ChangeLogEntry: Record "Change Log Entry";
        RetenPolAllowedTables: Codeunit "Reten. Pol. Allowed Tables";
        RetentionPeriod: Enum "Retention Period Enum";
        RecRef: RecordRef;
        TableFilters: JsonArray;
        Enabled: Boolean;
        Mandatory: Boolean;
    begin
        ChangeLogEntry.Reset();
        ChangeLogEntry.SetFilter("Field Log Entry Feature", '%1|%2', ChangeLogEntry."Field Log Entry Feature"::"Monitor Sensitive Fields", ChangeLogEntry."Field Log Entry Feature"::All);
        RecRef.GetTable(ChangeLogEntry);
        Enabled := true;
        Mandatory := true;
        RetenPolAllowedTables.AddTableFilterToJsonArray(TableFilters, RetentionPeriod::"28 Days", ChangeLogEntry.FieldNo(SystemCreatedAt), Enabled, Mandatory, RecRef);
        RetenPolAllowedTables.AddAllowedTable(Database::"Change Log Entry", ChangeLogEntry.FieldNo(SystemCreatedAt), TableFilters);
    end;
```
<span data-ttu-id="1c911-172">Þegar þróunaraðili hefur bætt töflum við listann, getur stjórnandi haft þær með í varðveislureglu.</span><span class="sxs-lookup"><span data-stu-id="1c911-172">After a developer has added tables to the list, an administrator can include them in a retention policy.</span></span> 

## <a name="see-also"></a><span data-ttu-id="1c911-173">Sjá einnig</span><span class="sxs-lookup"><span data-stu-id="1c911-173">See Also</span></span>
[<span data-ttu-id="1c911-174">Endurskoðunarbreytingar í Business Central</span><span class="sxs-lookup"><span data-stu-id="1c911-174">Auditing Changes in Business Central</span></span>](across-log-changes.md)  
[<span data-ttu-id="1c911-175">Afmörkun</span><span class="sxs-lookup"><span data-stu-id="1c911-175">Filtering</span></span>](ui-enter-criteria-filters.md#filtering)  
[<span data-ttu-id="1c911-176">Nota verkraðir til að tímaraða verkhlutum</span><span class="sxs-lookup"><span data-stu-id="1c911-176">Use Job Queues to Schedule Tasks</span></span>](admin-job-queues-schedule-tasks.md)  
<span data-ttu-id="1c911-177">[Unnið með [!INCLUDE[d365fin](includes/d365fin_md.md)]](ui-work-product.md)</span><span class="sxs-lookup"><span data-stu-id="1c911-177">[Working with [!INCLUDE[d365fin](includes/d365fin_md.md)]](ui-work-product.md)</span></span>  